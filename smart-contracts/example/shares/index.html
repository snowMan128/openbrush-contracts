<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Shares contract | OpenBrush</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.openbrush.io/smart-contracts/example/shares"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Shares contract | OpenBrush"><meta data-react-helmet="true" name="description" content="Similarly, we will implement another PSP-22 token"><meta data-react-helmet="true" property="og:description" content="Similarly, we will implement another PSP-22 token"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.openbrush.io/smart-contracts/example/shares"><link data-react-helmet="true" rel="alternate" href="https://docs.openbrush.io/smart-contracts/example/shares" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.openbrush.io/smart-contracts/example/shares" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.32f04ad0.css">
<link rel="preload" href="/assets/js/runtime~main.451ab0cc.js" as="script">
<link rel="preload" href="/assets/js/main.91061a43.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="OpenBrush" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo-dark.svg" alt="OpenBrush" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/smart-contracts/overview">Examples</a><a class="navbar__item navbar__link" href="/deployment">Deploy</a><a href="https://twitter.com/supercolony_net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link"></a><a href="https://github.com/Supercolony-net/openbrush-contracts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle toggle_2i4l react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Getting started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Smart Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/ownable">Ownable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/proxy">Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/diamond">Diamond Standard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/reentrancy-guard">Reentrancy Guard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/pausable">Pausable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/payment-splitter">Payment Splitter</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP22</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP22/psp22">PSP22</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Utils</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/timelock-controller">Timelock Controller</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP34</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP34/psp34">PSP34</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP1155</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP1155/psp1155">PSP1155</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">OpenBrush Example</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/setup_project">Setup the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/psp22">Implement PSP-22 contract</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/smart-contracts/example/shares">Shares contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/loan">Loan contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/data">Data and derive macro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/impls">Lending impls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/contract">Lending contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/implementation">Notes about methods</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployment">Deploy</a></li><li class="menu__list-item"><a class="menu__link" href="/evm-wasm-smart-contracts">EVM vs WASM Smart Contracts</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="markdown"><header><h1>Shares contract</h1></header><p>Similarly, we will implement another <a href="/smart-contracts/PSP22/psp22">PSP-22</a> token
which will represent the ownership of assets available by the smart contract
to be lent. In this token, we will need <a href="/smart-contracts/PSP22/extensions/metadata">PSP-22 Metadata</a>
and we will also need to mint and burn this token. We only want our contract(lending contract) to
perform these actions, so we will also add the <a href="/smart-contracts/ownable">Ownable</a> extension.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="definition-of-the-shares-trait"></a>Definition of the <code>Shares</code> trait<a class="hash-link" href="#definition-of-the-shares-trait" title="Direct link to heading">#</a></h2><p>In the <code>traits/shares.rs</code>, we will define a <code>Shares</code> trait.
That trait contains the next super traits: <code>PSP22</code>, <code>PSP22Mintable</code>, <code>PSP22Burnable</code>, <code>PSP22Metadata</code>, and <code>Ownable</code>, without any other method.
That shows that <code>Shares</code> is <code>PSP22</code> with mint and burn methods that can be called only by the owner.
In the implementation of the contract, we will implement that trait to be sure that all super traits are also implemented.
<code>SharesRef</code> can be used by other developers to do a cross contract call to <code>SharesContract</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">use brush::contracts::traits::{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ownable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    psp22::{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        extensions::{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            burnable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            metadata::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mintable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        },</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        *,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    },</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">};</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[brush::wrapper]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub type SharesRef = dyn PSP22 + PSP22Mintable + PSP22Burnable + PSP22Metadata + Ownable;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[brush::trait_definition]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub trait Shares: PSP22 + PSP22Mintable + PSP22Burnable + PSP22Metadata + Ownable {}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="add-dependencies"></a>Add dependencies<a class="hash-link" href="#add-dependencies" title="Direct link to heading">#</a></h2><p>In addition to the dependencies imported in the <a href="/smart-contracts/PSP22/psp22">PSP-22</a>
documentation, we will also add the <code>ownable</code> dependency the same way as in the
<a href="/smart-contracts/ownable">ownable</a> documentation. We will be using <code>SharesContract</code>
as a dependency in our lending contract to instantiate it. So we need to also add
the <code>&quot;rlib&quot;</code> crate type to have the ability to import the <code>SharesContract</code> as a dependency.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="implement-the-contract"></a>Implement the contract<a class="hash-link" href="#implement-the-contract" title="Direct link to heading">#</a></h2><p>Implementing our shares contract will follow the same steps as implementing
the basic <code>PSP-22</code> contract in the previous step, but we will do some small
changes for the token to be mintable, burnable, and for these functions to
be restricted. Therefore, on top of the imports in the previous contract,
we also need these imports:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">#![cfg_attr(not(feature = &quot;std&quot;), no_std)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#![feature(min_specialization)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// This contract will be used to represent the shares of a user</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// and other instance of this contract will be used to represent</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// the amount of borrowed tokens</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[brush::contract]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub mod shares {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use brush::contracts::{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ownable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        psp22::extensions::{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            burnable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            metadata::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mintable::*,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        },</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    };</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use brush::modifiers;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use ink_lang::codegen::Env;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use ink_prelude::string::String;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use ink_storage::traits::SpreadAllocate;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    use lending_project::traits::shares::*;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="define-the-storage"></a>Define the storage<a class="hash-link" href="#define-the-storage" title="Direct link to heading">#</a></h2><p>In this storage, we will also derive the storage trait related to <code>Ownable</code>
and declare the field related to this trait.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// Define the storage for PSP22 data, Metadata data and Ownable data</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[ink(storage)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[derive(Default, SpreadAllocate, PSP22Storage, OwnableStorage, PSP22MetadataStorage)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub struct SharesContract {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[PSP22StorageField]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    psp22: PSP22Data,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[OwnableStorageField]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ownable: OwnableData,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[PSP22MetadataStorageField]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    metadata: PSP22MetadataData,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="implement-the-extension-traits"></a>Implement the extension traits<a class="hash-link" href="#implement-the-extension-traits" title="Direct link to heading">#</a></h2><p>We will be using these extensions in our token, so we will implement them for
our storage.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// implement PSP22 Trait for our share</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl PSP22 for SharesContract {}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// implement Ownable Trait for our share</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl Ownable for SharesContract {}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// implement Metadata Trait for our share</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl PSP22Metadata for SharesContract {}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// It forces the compiler to check that you implemented all super traits</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl Shares for SharesContract {}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="implement-the-burnable-and-mintable-traits"></a>Implement the Burnable and Mintable traits<a class="hash-link" href="#implement-the-burnable-and-mintable-traits" title="Direct link to heading">#</a></h2><p>Now we will implement the <code>PSP22Burnable</code> and <code>PSP22Mintable</code> traits.
These are a little different so we are doing it in a separate section.
We don&#x27;t want anybody to mint or burn the tokens, we only want the owner,
in this case, our lending contract, to do it. So we will add the <code>PSP22Burnable</code>
and <code>PSP22Mintable</code> and mark the functions of these traits with the <code>only_owner</code>
restriction.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// implement Mintable Trait for our share</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl PSP22Mintable for SharesContract {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// override the `mint` function to add the `only_owner` modifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[ink(message)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[modifiers(only_owner)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn mint(&amp;mut self, account: AccountId, amount: Balance) -&gt; Result&lt;(), PSP22Error&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        self._mint(account, amount)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// implement Burnable Trait for our share</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl PSP22Burnable for SharesContract {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// override the `burn` function to add the `only_owner` modifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[ink(message)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[modifiers(only_owner)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn burn(&amp;mut self, amount: Balance) -&gt; Result&lt;(), PSP22Error&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        self._burn(self.env().caller(), amount)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// override the `burn_from` function to add the `only_owner` modifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[ink(message)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[modifiers(only_owner)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn burn_from(&amp;mut self, account: AccountId, amount: Balance) -&gt; Result&lt;(), PSP22Error&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        self._burn_from(account, amount)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will restrict accounts other than the owner of the token (which will be the lending contract)
from calling these functions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="define-the-constructor"></a>Define the constructor<a class="hash-link" href="#define-the-constructor" title="Direct link to heading">#</a></h2><p>Finally, we will define the constructor where we will set the name and the symbol
of the token and then initialize the owner of the token
(which then will be able to mint and burn the tokens).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl SharesContract {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// constructor with name and symbol</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    #[ink(constructor)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    pub fn new(name: Option&lt;String&gt;, symbol: Option&lt;String&gt;) -&gt; Self {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ink_lang::codegen::initialize_contract(|instance: &amp;mut SharesContract| {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            let caller = instance.env().caller();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            instance.metadata.name = name;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            instance.metadata.symbol = symbol;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            instance.metadata.decimals = 18;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            instance._init_with_owner(caller);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        })</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/Supercolony-net/openbrush-contracts/tree/main/docs/docs/smart-contracts/example/shares.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/smart-contracts/example/psp22"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Implement PSP-22 contract</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/smart-contracts/example/loan"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Loan contract Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#definition-of-the-shares-trait" class="table-of-contents__link">Definition of the <code>Shares</code> trait</a></li><li><a href="#add-dependencies" class="table-of-contents__link">Add dependencies</a></li><li><a href="#implement-the-contract" class="table-of-contents__link">Implement the contract</a></li><li><a href="#define-the-storage" class="table-of-contents__link">Define the storage</a></li><li><a href="#implement-the-extension-traits" class="table-of-contents__link">Implement the extension traits</a></li><li><a href="#implement-the-burnable-and-mintable-traits" class="table-of-contents__link">Implement the Burnable and Mintable traits</a></li><li><a href="#define-the-constructor" class="table-of-contents__link">Define the constructor</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 OpenBrush, Supercolony.net.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.451ab0cc.js"></script>
<script src="/assets/js/main.91061a43.js"></script>
</body>
</html>