<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Errors | OpenBrush</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.openbrush.io/smart-contracts/example/errors"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Errors | OpenBrush"><meta data-react-helmet="true" name="description" content="We will define errors thrown by the lending contract at end of traits/lending.rs"><meta data-react-helmet="true" property="og:description" content="We will define errors thrown by the lending contract at end of traits/lending.rs"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.openbrush.io/smart-contracts/example/errors"><link data-react-helmet="true" rel="alternate" href="https://docs.openbrush.io/smart-contracts/example/errors" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.openbrush.io/smart-contracts/example/errors" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3900dd10.css">
<link rel="preload" href="/assets/js/runtime~main.93062ece.js" as="script">
<link rel="preload" href="/assets/js/main.b9b633ec.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="OpenBrush" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo-dark.svg" alt="OpenBrush" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/smart-contracts/overview">Examples</a><a class="navbar__item navbar__link" href="/deployment">Deploy</a><a href="https://twitter.com/supercolony_net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link"></a><a href="https://github.com/Supercolony-net/openbrush-contracts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle toggle_2i4l react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Getting started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Smart Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/ownable">Ownable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/reentrancy-guard">Reentrancy Guard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/pausable">Pausable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/payment-splitter">Payment Splitter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/timelock-controller">Timelock Controller</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP22</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP22/psp22">PSP22</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Utils</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP721</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP721/psp721">PSP721</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">PSP1155</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/PSP1155/psp1155">PSP1155</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extensions</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">OpenBrush Example</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/setup_project">Setup the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/psp22">Implement PSP-22 contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/shares">Shares contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/loan">Loan contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/data">Data and derive macro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/impls">Lending impls</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/smart-contracts/example/errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/contract">Lending contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/smart-contracts/example/implementation">Notes about methods</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployment">Deploy</a></li><li class="menu__list-item"><a class="menu__link" href="/evm-wasm-smart-contracts">EVM vs WASM Smart Contracts</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="markdown"><header><h1>Errors</h1></header><p>We will define errors thrown by the lending contract at end of <code>traits/lending.rs</code>
because only that contract returns its own errors. But if you have more than one error definition,
better to create a separate <code>traits/errors.rs</code> file for them(or a directory <code>traits/errors/</code>).
In that file(directory) you can define the errors that will be returned by your contracts,
and implement conversion between different errors.
In the project, we implement the conversion for some errors from OpenBrush.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="define-errors"></a>Define errors<a class="hash-link" href="#define-errors" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// Enum of errors raised by our lending smart contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[derive(Debug, PartialEq, Eq, scale::Encode, scale::Decode)]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[cfg_attr(feature = &quot;std&quot;, derive(scale_info::TypeInfo))]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub enum LendingError {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PSP22Error(PSP22Error),</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PSP721Error(PSP721Error),</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AccessControlError(AccessControlError),</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PausableError(PausableError),</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the lender does not have enough allowance</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// to transfer the lending asset to the contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientAllowanceToLend,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the lender tries to lend more amount of asset than they own</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientBalanceToLend,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the borrower does not have enough allowance</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// to transfer the borrowed asset to the contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientAllowanceToRepay,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the borrower tries to repay more amount of asset than they own</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientBalanceToRepay,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the borrower does not have enough allowance</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// to transfer the collateral asset to the contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientAllowanceForCollateral,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown when the borrower tries to use more amount of asset as collateral than they own</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientCollateralBalance,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // This error will be thrown if the amount of borrowed assets is greater than or equal to the liquidation price of deposited collateral</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AmountNotSupported,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // This error will be thrown if the user wants to borrow or withdraw more assets than there currently are in the contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    InsufficientBalanceInContract,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if the user tries to lend or borrow asset which is not supported by the lending contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// or if a user tries to use an usupported asset as a collateral</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetNotSupported,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if the user tries to allow an asset which is already allowed</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetSupported,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if the user tries to repay a loan he does not own</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    NotTheOwner,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if the loan we try to liquidate was already liquidated</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    LoanLiquidated,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if the loan we try to liquidate is not below liquidation price</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    CanNotBeLiquidated,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /// This error will be thrown if an user wants to disallow lending of an asset which is still present in the contract</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetsInTheContract,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="implement-conversion-from-openbrush-errors"></a>Implement conversion from OpenBrush errors<a class="hash-link" href="#implement-conversion-from-openbrush-errors" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl From&lt;AccessControlError&gt; for LendingError {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn from(access: AccessControlError) -&gt; Self {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        LendingError::AccessControlError(access)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl From&lt;PausableError&gt; for LendingError {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn from(access: PausableError) -&gt; Self {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        LendingError::PausableError(access)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl From&lt;PSP22Error&gt; for LendingError {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn from(error: PSP22Error) -&gt; Self {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        LendingError::PSP22Error(error)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">impl From&lt;PSP721Error&gt; for LendingError {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fn from(error: PSP721Error) -&gt; Self {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        LendingError::PSP721Error(error)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/Supercolony-net/openbrush-contracts/tree/main/docs/docs/smart-contracts/example/errors.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/smart-contracts/example/impls"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Lending impls</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/smart-contracts/example/contract"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lending contract Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#define-errors" class="table-of-contents__link">Define errors</a></li><li><a href="#implement-conversion-from-openbrush-errors" class="table-of-contents__link">Implement conversion from OpenBrush errors</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 OpenBrush, Supercolony.net.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.93062ece.js"></script>
<script src="/assets/js/main.b9b633ec.js"></script>
</body>
</html>